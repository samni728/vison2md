# åˆå¹¶æ–‡æ¡£åŠŸèƒ½è¯´æ˜

## åŠŸèƒ½æ¦‚è§ˆ

æ–°å¢"åˆå¹¶æ‰€æœ‰æ–‡æ¡£åˆ°å•ä¸ªæ–‡ä»¶"é€‰é¡¹ï¼Œå…è®¸ç”¨æˆ·å°†æ‰¹é‡ä¸Šä¼ çš„æ–‡æ¡£æ–‡ä»¶åˆå¹¶åˆ°ä¸€ä¸ªç»Ÿä¸€çš„ Markdown æ–‡ä»¶ä¸­ã€‚

## ä½¿ç”¨æ–¹æ³•

### ğŸ“‹ å‰ç«¯æ“ä½œ

1. **å¯ç”¨åˆå¹¶é€‰é¡¹** -

   - åœ¨"ğŸ“ æç¤ºè¯ç±»å‹"é…ç½®é¢æ¿ä¸­æ‰¾åˆ°
   - å‹¾é€‰"ğŸ“„ åˆå¹¶æ‰€æœ‰æ–‡æ¡£åˆ°å•ä¸ªæ–‡ä»¶"

2. **ä¸Šä¼ å¤šä¸ªæ–‡æ¡£**

   - æ‰¹é‡ä¸Šä¼  PDF æˆ–å›¾ç‰‡æ–‡ä»¶
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹æ˜¯å¦å¯ç”¨äº†åˆå¹¶æ¨¡å¼

3. **ç»“æœå±•ç¤º**
   - åˆå¹¶æ¨¡å¼ä¸‹ï¼Œåªç”Ÿæˆä¸€ä¸ªåˆå¹¶ MD æ–‡ä»¶
   - æ–‡ä»¶åæ ¼å¼ï¼š`åˆå¹¶æ–‡æ¡£_20231201_143022.md`

### ğŸ”§ åç«¯é€»è¾‘

1. **åˆå¹¶é€»è¾‘**ï¼š

   ```python
   if merge_output and results:
       # åˆ›å»ºåˆå¹¶æ–‡æ¡£å¤´éƒ¨
       # ä¸ºæ¯ä¸ªæ–‡æ¡£æ·»åŠ ç‹¬ç«‹ç« èŠ‚
       # ä¿å­˜åˆ°å•ä¸€MDæ–‡ä»¶
   ```

2. **æ–‡æ¡£ç»“æ„**ï¼š

   ```markdown
   # åˆå¹¶æ–‡æ¡£å¤„ç†ç»“æœ

   å¤„ç†æ—¶é—´ï¼š2023-12-01 14:30:22
   å¤„ç†æ–‡æ¡£æ•°é‡ï¼šX ä¸ª

   ---

   # 1. document1

   **åŸå§‹æ–‡ä»¶ï¼š** [filename1.pdf](/uploads/filename1.pdf)

   [æ–‡æ¡£å†…å®¹ 1]

   ---

   # 2. document2

   **åŸå§‹æ–‡ä»¶ï¼š** [filename2.jpg](/uploads/filename2.jpg)

   [æ–‡æ¡£å†…å®¹ 2]
   ```

## æ ¸å¿ƒç‰¹æ€§

### âœ… åŠŸèƒ½ç‰¹ç‚¹

- **è‡ªåŠ¨æ–‡æ¡£ç¼–å·** - æŒ‰ä¸Šä¼ é¡ºåºä¾æ¬¡ç¼–å·
- **åŸå§‹æ–‡ä»¶é“¾æ¥** - æ¯ä¸ªæ–‡æ¡£åŒ…å«æŒ‡å‘`/uploads/`çš„æ–‡ä»¶é“¾æ¥
- **æ¸…æ™°æ–‡æ¡£åˆ†å‰²** - ç”¨`---`åˆ†éš”ä¸åŒæ–‡æ¡£å†…å®¹
- **æ—¶é—´æˆ³è®°å½•** - è‡ªåŠ¨è®°å½•å¤„ç†æ—¶é—´å’Œæ–‡ä»¶æ•°é‡
- **æ ¼å¼ä¿æŒ** - ä¿ç•™åŸæ–‡æ¡£çš„ Markdown æ ¼å¼åŒ–

### ğŸ¯ é€‚ç”¨åœºæ™¯

- **æ‰¹é‡å‘ç¥¨å¤„ç†** - ä¸€æ¬¡æ€§å¤„ç†å¤šä¸ªå‘ç¥¨åˆ°ç»Ÿä¸€æ–‡æ¡£
- **å¤šæ–‡æ¡£æ±‡æ€»æŠ¥å‘Š** - å°†å¤šä¸ªæŠ¥å‘Šåˆå¹¶ç”Ÿæˆç»¼åˆåˆ†æ
- **é¡¹ç›®æ–‡æ¡£å½’æ¡£** - åˆå¹¶ç›¸å…³é¡¹ç›®æ–‡æ¡£ä¾¿äºé¡¹ç›®ç®¡ç†
- **ä¼šè®®çºªè¦æ•´ç†** - å°†å¤šé¡µæ‰«ææ–‡æ¡£æ±‡æ€»æˆå®Œæ•´çºªè¦

## æŠ€æœ¯å®ç°

### å‰ç«¯ä¿®æ”¹

1. **HTML ç»“æ„**ï¼šåœ¨æç¤ºè¯é…ç½®åŒºåŸŸå¢åŠ åˆå¹¶é€‰é¡¹ checkbox
2. **JavaScript é€»è¾‘**ï¼šåœ¨ FormData ä¸­å¢åŠ `merge_output`å‚æ•°
3. **UI æ ·å¼**ï¼šä¸ºåˆå¹¶é€‰é¡¹æ·»åŠ é†’ç›®çš„è§†è§‰æ•ˆæœ

### åç«¯ä¿®æ”¹

1. **API å‚æ•°**ï¼šæ–°å¢`merge_output: bool = Form(False)`
2. **å¤„ç†é€»è¾‘**ï¼šæ£€æµ‹åˆå¹¶æ¨¡å¼å¹¶åˆ›å»ºç»Ÿä¸€æ–‡æ¡£
3. **æ–‡æ¡£ç”Ÿæˆ**ï¼šæ„å»ºç»“æ„åŒ–åˆå¹¶ç»“æœ

### æ–‡ä»¶æ˜ å°„

- `/web/index.html` - æ·»åŠ å‰ç«¯ UI ç»„ä»¶
- `/web/app.js` - ä¼ é€’åˆå¹¶å‚æ•°è‡³åç«¯
- `/web/style.css` - ç¾åŒ–åˆå¹¶é€‰é¡¹æ ·å¼
- `/server/main.py` - æ ¸å¿ƒåˆå¹¶é€»è¾‘å®ç°

## ä½¿ç”¨ç¤ºä¾‹

### ä½¿ç”¨æµç¨‹

```mermaid
graph TD
   A[æ‰¹é‡ä¸Šä¼ æ–‡æ¡£] --> B{å‹¾é€‰åˆå¹¶é€‰é¡¹}
   B -->|æ˜¯| C[ç³»ç»Ÿå¤„ç†å„æ–‡æ¡£]
   B -->|å¦| D[å•ç‹¬å¤„ç†æ–‡æ¡£]
   C --> E[åˆ›å»ºåˆå¹¶MDæ–‡ä»¶]
   D --> F[åˆ†åˆ«ç”ŸæˆMDæ–‡ä»¶]
   E --> G[è¿”å›å•ä¸€ç»“æœ]
   F --> H[è¿”å›å¤šä¸ªç»“æœ]
```

### ä»£ç ç¤ºä¾‹

```javascript
// å‰ç«¯å‹¾é€‰çŠ¶æ€æ£€æŸ¥
const mergeOutput = document.getElementById("merge_output");
form.append("merge_output", mergeOutput.checked);
```

```python
# åç«¯åˆå¹¶å¤„ç†
if merge_output and results:
    merged_content.append("# åˆå¹¶æ–‡æ¡£å¤„ç†ç»“æœ\n\n")
    for idx, result in enumerate(results, 1):
        # ç”Ÿæˆåˆå¹¶æ–‡æ¡£å†…å®¹
```

æ­¤åŠŸèƒ½æå¤§åœ°æå‡äº†æ‰¹é‡æ–‡æ¡£å¤„ç†çš„ä¾¿æ·æ€§ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦æ±‡æ€»æŠ¥å‘Šçš„åœºæ™¯ä½¿ç”¨ã€‚
